<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>HNN Admin â€” Edit Site</title>
<style>
  body{font-family:system-ui;background:#f4f4f4;padding:2rem;color:#222}
  .panel{max-width:900px;margin:auto;background:white;padding:2rem;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.1)}
  input,select,textarea{width:100%;padding:12px;margin:8px 0;border:1px solid #ddd;border-radius:6px;font-size:1rem}
  label{font-weight:bold;margin-top:1rem;display:block}
  button{padding:12px 24px;background:#0066cc;color:white;border:none;border-radius:6px;cursor:pointer;font-size:1.1rem}
  button:hover{background:#0055aa}
  .slide{margin:2rem 0;padding:1rem;background:#fafafa;border-radius:8px}
  .pin-screen{text-align:center;margin-top:100px}
  input[type=color]{height:60px}
</style>
</head>
<body>

<div id="pinScreen" class="pin-screen">
  <h1>Honest News Network Admin</h1>
  <p>Type the secret word:</p>
  <input type="password" id="secretInput" style="font-size:2rem;text-align:center;letter-spacing:8px">
  <button onclick="checkSecret()">Enter</button>
</h2>
</div>

<div id="panel" class="panel" style="display:none">
  <!-- Same panel content as before â€“ no changes below this line -->
  <h1>Live Site Editor</h1>

  <label>Change Secret Word (current: <strong>truth</strong>)</label>
  <input type="text" id="newSecret" placeholder="New secret word (e.g. biblicaltruth2025)">

  <label>Primary Button Color</label>
  <input type="color" id="primaryColor">

  <label>Header Background</label>
  <input type="color" id="headerBg">

  <label>Body Text Color</label>
  <input type="color" id="textColor">

  <label>Google Font</label>
  <select id="fontSelect" onchange="document.getElementById('fontName').value=this.value">
    <option value="Roboto">Roboto</option>
    <option value="Montserrat">Montserrat</option>
    <option value="Playfair Display">Playfair Display</option>
    <option value="Lora">Lora</option>
    <option value="Open Sans">Open Sans</option>
    <option value="Raleway">Raleway</option>
    <option value="Oswald">Oswald</option>
    <option value="Merriweather">Merriweather</option>
    <option value="Source Serif Pro">Source Serif Pro</option>
    <option value="Nunito">Nunito</option>
    <option value="Poppins">Poppins</option>
    <option value="Lato">Lato</option>
  </select>
  <input type="text" id="fontName" placeholder="Or type any Google Font name">

  <hr style="margin:2rem 0">

  <label>Site-wide Banner (optional)</label>
  <input type="text" id="bannerText" placeholder="e.g. New episode drops Friday!">
  <label><input type="checkbox" id="bannerOn"> Show banner on all pages</label>

  <h2 style="margin-top:3rem">Hero Carousel Slides</h2>
  <div id="slides"></div>
  <button onclick="addSlide()">+ Add New Slide</button>

  <button onclick="saveAll()" style="margin-top:2rem">SAVE ALL CHANGES TO LIVE SITE</button>
  <p id="status" style="margin-top:1rem;font-weight:bold"></p>
</div>

<script>
// CHANGE THIS WORD TO WHATEVER YOU WANT â€“ this is your new "password"
const SECRET_WORD = "truth";

let data = {};

async function checkSecret() {
  if (document.getElementById("secretInput").value.trim().toLowerCase() === SECRET_WORD) {
    document.getElementById("pinScreen").style.display = "none";
    document.getElementById("panel").style.display = "block";
    loadData();
  } else {
    alert("Wrong word â€“ hint: it's in the Bible a lot ðŸ˜‰");
  }
}

function loadData() {
  // same load code as before â€“ unchanged
  fetch("data.json?" + Date.now()).then(r=>r.json()).then(d=> {
    data = d;
    document.getElementById("primaryColor").value = d.primaryColor || "#0066cc";
    document.getElementById("headerBg").value = d.headerBg || "#111111";
    document.getElementById("textColor").value = d.textColor || "#333333";
    document.getElementById("fontName").value = d.fontName || "Roboto";
    document.getElementById("fontSelect").value = d.fontName || "Roboto";
    document.getElementById("bannerText").value = d.bannerText || "";
    document.getElementById("bannerOn").checked = d.bannerOn || false;

    const container = document.getElementById("slides");
    container.innerHTML = "";
    (d.heroSlides || []).forEach(s => addSlideToPanel(s));
  });
}

function addSlideToPanel(s) {
  const div = document.createElement("div");
  div.className = "slide";
  div.innerHTML = `
    <input placeholder="Title (use <br> for line break)" value="${s.title || ''}">
    <input placeholder="Subtitle" value="${s.subtitle || ''}">
    <input placeholder="Button text" value="${s.buttonText || ''}">
    <input placeholder="Button link" value="${s.buttonLink || ''}">
    <input placeholder="Image URL" value="${s.image || ''}" style="width:100%">
    <button onclick="this.parentElement.remove();saveAll()">Delete</button>
    <hr>
  `;
  document.getElementById("slides").appendChild(div);
}

function addSlide() {
  addSlideToPanel({title:"New Slide",subtitle:"Subtitle",buttonText:"Click",buttonLink:"#",image:""});
}

function saveAll() {
  const newWord = document.getElementById("newSecret").value.trim();
  if (newWord) {
    alert("To change the secret word permanently, edit the line in the code that says const SECRET_WORD = \"truth\";");
  }

  data.primaryColor = document.getElementById("primaryColor").value;
  data.headerBg = document.getElementById("headerBg").value;
  data.textColor = document.getElementById("textColor").value;
  data.fontName = document.getElementById("fontName").value || document.getElementById("fontSelect").value;
  data.font = `https://fonts.googleapis.com/css2?family=${encodeURIComponent(data.fontName.replace(/ /g,'+'))}:wght@400;700&display=swap`;
  data.bannerText = document.getElementById("bannerText").value;
  data.bannerOn = document.getElementById("bannerOn").checked;

  data.heroSlides = [];
  document.querySelectorAll("#slides .slide").forEach(el => {
    const inputs = el.querySelectorAll("input");
    data.heroSlides.push({
      title: inputs[0].value,
      subtitle: inputs[1].value,
      buttonText: inputs[2].value,
      buttonLink: inputs[3].value,
      image: inputs[4].value
    });
  });

  document.getElementById("status").textContent = "Changes ready locally â€“ GitHub save coming soon!";
  console.log("Updated data.json â†’", JSON.stringify(data, null, 2));
}
</script>
</body>
</html>
