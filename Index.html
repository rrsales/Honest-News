<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Honest News – Mega Menu Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body { margin:0; font-family: system-ui, sans-serif; background:#020617; color: #e5e7eb;}
    header { background: #0b1120; box-shadow: 0 4px 24px #000a; }
    .nav { display: flex; align-items: center; padding: 0 24px; min-height: 56px; }
    .nav-logo { font-weight: 700; font-size: 1.4rem; color: #0ea5e9; margin-right: 32px; letter-spacing: .05em;}
    .nav-links { display: flex; gap: 14px; position: relative;}
    .nav-link { position:relative; padding: 8px 18px; color: #e5e7eb; text-decoration: none; border-radius: 999px; transition: background .18s;}
    .nav-link:hover, .nav-link.active { background: #111827;}
    .nav-link[data-has-mega]:after { content: " ▼"; font-size: .7em; }
    .mega-menu { display: none; position: absolute; top: 44px; left:0; background: #1e293b; color: #e5e7eb; padding: 18px 30px 18px 18px; border-radius: 18px; min-width: 300px; box-shadow: 0 16px 40px #000b; z-index: 99;}
    .nav-link:hover .mega-menu, .nav-link:focus-within .mega-menu { display: block; }
    .mega-title { font-weight: 600; margin-bottom: 8px; font-size: 1.05em; color: #0ea5e9;}
    .mega-group { margin-bottom: 16px;}
    .mega-link { display: block; padding: 5px 0 5px 8px; color: #e5e7eb; text-decoration: none; border-radius: 8px; transition: background .13s;}
    .mega-link:hover { background: #0ea5e9; color: #0b1120;}
    main { padding: 44px 24px; }
    @media (max-width:600px){
      .nav { flex-direction: column; align-items: flex-start; }
      .nav-links { flex-direction: column; gap: 0; width:100%;}
      .nav-link { width:100%; }
      .mega-menu { left:0; right:0; min-width:unset; }
    }
  </style>
</head>
<body>
<header>
  <nav class="nav">
    <span class="nav-logo">Honest News</span>
    <div class="nav-links" id="navLinks">
      <!-- Navigation will be loaded here -->
    </div>
  </nav>
</header>
<main>
  <h1>Mega Menu Demo</h1>
  <p>This is a dummy page for testing your menu. Use the admin/dashboard to edit the menu and test live updates.</p>
  <p>Make sure to add a few mega menu items and sub-links in your dashboard for full testing!</p>
</main>
<script>
async function loadMenu() {
  let menu = [];
  try {
    const res = await fetch('site-data.json?cache='+Date.now());
    const data = await res.json();
    menu = data.menu || [];
  } catch(e){}

  const navLinks = document.getElementById('navLinks');
  navLinks.innerHTML = '';
  menu.forEach(item => {
    // Mega menu (type: mega)
    if(item.type === 'mega' && Array.isArray(item.subItems) && item.subItems.length > 0){
      const wrap = document.createElement('div');
      wrap.className = 'nav-link';
      wrap.tabIndex = 0;
      wrap.setAttribute('data-has-mega','true');
      wrap.innerHTML = `${item.label || item.title}`;
      // Mega Menu Container
      const mega = document.createElement('div');
      mega.className = 'mega-menu';
      // Each subitem (can group by category if you want)
      item.subItems.forEach(sub=>{
        const group = document.createElement('div');
        group.className = 'mega-group';
        if(sub.label){
          const title = document.createElement('div');
          title.className = 'mega-title';
          title.textContent = sub.label;
          group.appendChild(title);
        }
        if(sub.description){
          const desc = document.createElement('div');
          desc.style = 'color:#9ca3af;font-size:.89em;margin-bottom:2px;';
          desc.textContent = sub.description;
          group.appendChild(desc);
        }
        if(sub.url){
          const link = document.createElement('a');
          link.className = 'mega-link';
          link.href = sub.url;
          link.textContent = sub.url.replace(/^https?:\/\//,'');
          group.appendChild(link);
        }
        mega.appendChild(group);
      });
      wrap.appendChild(mega);
      navLinks.appendChild(wrap);
    }
    // Simple link
    else {
      const link = document.createElement('a');
      link.className = 'nav-link';
      link.href = item.url || "#";
      link.textContent = item.label || item.title || 'Item';
      navLinks.appendChild(link);
    }
  });
}
loadMenu();
</script>
</body>
</html>

